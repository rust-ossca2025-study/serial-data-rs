# Week 1: Rust 기초 학습 & 시리얼 번호 생성

## Rust 핵심 특징

1. **메모리 안전성**: 소유권(Ownership) 시스템으로 메모리 누수 방지
2. **동시성 안전성**: 데이터 레이스 방지
3. **제로 코스트 추상화**: 고수준 추상화가 런타임 오버헤드 없음
4. **타입 안전성**: 컴파일 타임에 타입 검사
5. **테스트 시스템**: 표준 테스트 프레임워크 내장

위 같은 성질을 염두해서 코드를 짜보려고 노력했다.

## 1. 00_intro.rs - 함수 분리 연습

### 원본 코드 vs 개선된 코드

**원본 (단순한 구조):**
```rust
fn main() {
    // 모든 로직이 main 함수 안에 있음
    let customerid = Some(get_user_input());
    let productid = Some(get_user_input());
    let plain_serial = format!("{}{}", customerid.unwrap(), productid.unwrap());
    // ...
}
```

**개선된 구조 (함수 분리):**
```rust
fn get_user_input(prompt: &str) -> String { /* ... */ }
fn generate_serial(customer_id: &str, product_id: &str) -> String { /* ... */ }
fn extract_ids(serial: &str) -> (&str, &str) { /* ... */ }
fn validate_input(customer_id: &str, product_id: &str) -> bool { /* ... */ }

fn main() {
    // main 함수는 전체 흐름만 관리
}
```

### 함수 분리의 장점

1. **가독성 향상**: 각 함수가 하나의 명확한 역할
2. **재사용성**: 다른 곳에서도 함수를 재사용 가능
3. **테스트 용이성**: 각 함수를 독립적으로 테스트 가능
4. **유지보수성**: 코드 수정 시 영향 범위가 명확
5. **확장성**: 새로운 요구사항이 추가될 때 기존 코드에 영향 없이 확장 가능

평소 다른 언어에서도 최대한 모듈화를 많이 하려고 했었는데, 이번에도 같은 원칙을 적용해보았다. 특히 확장성에 대해서도 생각하면 예를 들어 `validate_input` 같은 경우에도 지금은 글자수로만 확인했는데, 다른 확인할 것들이 생겨난다면 분리하는 것이 좋을 것 같다. Rust의 특성상 함수 분리가 런타임 성능에 영향을 주지 않고, 테스트 친화적이여서 Rust에서도 중요한 작업이라고 생각했다. 

## 3. 01_encrypt.rs - 향후 개선 계획

### 테스트 케이스 추가

`01_encrypt.rs`에 6개의 테스트 케이스를 추가했다:

#### 1. `test_encryption_decryption`
- **목적**: 기본 암호화/복호화 기능 검증
- **검증 내용**: 
  - 암호화된 결과가 원본과 다른지 확인
  - 복호화된 결과가 원본과 같은지 확인
- **학습 포인트**: `assert_ne!`, `assert_eq!` 사용법

#### 2. `test_encryption_with_different_keys`
- **목적**: 서로 다른 키로 암호화 시 결과가 다른지 검증
- **검증 내용**:
  - 같은 평문을 다른 키로 암호화하면 결과가 달라야 함
  - 각각 올바른 키로 복호화하면 원본과 같아야 함
- **학습 포인트**: 암호화의 보안성 검증

#### 3. `test_wrong_key_decryption`
- **목적**: 잘못된 키로 복호화 시 에러 발생 검증
- **검증 내용**: 올바른 키로 암호화한 데이터를 잘못된 키로 복호화하면 실패해야 함
- **학습 포인트**: `Result` 타입과 에러 처리

#### 4. `test_base64_encoding`
- **목적**: BASE64 인코딩이 올바른 문자만 포함하는지 검증
- **검증 내용**: 암호화된 결과가 BASE64 표준 문자(A-Z, a-z, 0-9, +, /, =)만 포함하는지 확인
- **학습 포인트**: BASE64 인코딩 표준 이해

#### 5. `test_end_to_end_process`
- **목적**: 전체 프로세스(암호화→복호화→ID추출) 검증
- **검증 내용**:
  - 고객 ID와 제품 ID를 합쳐서 시리얼 생성
  - 암호화 후 복호화하여 원본과 일치하는지 확인
  - 복호화된 결과에서 ID를 추출하여 원본과 일치하는지 확인
- **학습 포인트**: 전체 워크플로우 검증

### 테스트 실행 방법
```bash
cargo test --bin 01_encrypt
```

### 테스트 작성 시 학습한 개념들
- `#[cfg(test)]` 속성: 테스트 모듈임을 명시
- `#[test]` 속성: 테스트 함수임을 명시
- `assert!`, `assert_eq!`, `assert_ne!`: 다양한 assertion 매크로
- `use super::*`: 상위 모듈의 모든 항목을 가져오기